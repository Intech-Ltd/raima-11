<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Replication and Mirroring Guide|Utilities" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" MadCap:PathToHelpSystem="../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>dbmirror</title>
        <link rel="icon" type="image/png" href="http://docs.raima.com/favicon.png" />
        <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/ArgsTwoCol.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/raima.css" rel="stylesheet" />
        <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="../../Default_CSH.htm#util/dbmirror.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../dbDataFlow.htm">Replication and Mirroring Guide</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../DFUG/DFUtilities.htm">Utilities</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">dbmirror</span>
        </div>
        <h3 class="newpage">dbmirror</h3>
        <p>Database Mirroring Server</p>
        <p class="Heading">Prototype
</p><pre xml:space="preserve">dbmirror [-d PATH] [-p PORT] [-v] [-nodisk] 
          [-start | -stop | -query | -install exepath | -uninstall]
</pre>
        <p class="Heading">Description
</p>
        <p>The <b>dbmirror</b> utility acts as either a <i>master</i> or <i>slave</i> database mirroring server.
 The same <b>dbmirror</b> instance may operate in both master and slave roles at the same time (using separate threads), and may operate on any number of databases, but each database is either a master or a slave database. It always runs on the same computer as a TFS&#160;(the <a href="tfserver.htm">tfserver</a> utility or a customized TFS created by the programmer). The TFS/<b>dbmirror</b> partnership is established by using successive TCP/IP&#160;ports (e.g. if the TFS uses port 2335, then dbmirror will use 2336).</p>
        <p>In the master role, <b>dbmirror</b> responds to requests from counterpart dbmirror slaves. For the initial request from the dbmirror slave, the dbmirror master will create a thread to service the database being requested. The thread will be dedicated to serving log files to the slave until the slave terminates the connection. The master thread will receive log file requests from the slave, and search the local directory for each request. If the log file exists, it will send it to the slave. If it doesn't exist, and the master hasn't already done so, it will send the entire database to the slave, after which the slave will begin requesting each log file that has been created after the database image was generated.</p>
        <p>In the slave role, <b>dbmirror</b> may partner with a TFS or not. If there is a TFS, the changes are applied to the local database. If there is no TFS, then <b>dbmirror</b> will save change log files in the database's subdirectory (below the document root), which may be processed at a later time by a TFS. It is the slave that initiates the connection with the master dbmirror. The slave initiates the connection when the <b><a href="dbget.htm">dbget</a></b> utility is run with command-line options that identify this <b>dbmirror</b> and a database that is hosted by another TFS. In response to dbget, <b>dbmirror</b> will begin a slave thread which connects to the master <b>dbmirror</b> and requests updates from the database identified in the dbget command-line.</p>
        <p>By convention, the slave database mirror is placed within a directory that is named after the host of the master database. For example, if the database named <code>tims</code> is mirrored from a host identified as <code>tfs.raima.com</code>, then the mirror of <code>tims</code> will be stored in:</p>
        <blockquote><pre xml:space="preserve"><i>documentRoot</i>/tfs.raima.com-<i>master_port</i>/tims</pre>
        </blockquote>
        <p>All databases mirrored to this document root from the same host will be stored in the same subdirectory. Databases stored in subdirectories are the products of mirroring or replication, and thus cannot be opened for updating. See <a href="../DFUG/Chapter7.htm">Opening Slave Databases from Programs</a> for more information about using read-only databases from programs.</p>
        <p>When this utility is run as a foreground process, it may be cleanly terminated by issuing SIGINT&#160;(normally ^C from the keyboard). SIGTERM&#160;has the same effect. If the utility does not terminate immediately it will be terminated immediately (cleanly or not) upon the third signal.</p>
        <p class="Heading">Options
</p>
        <table style="caption-side: top;mc-table-style: url('../Resources/TableStyles/ArgsTwoCol.css');" class="TableStyle-ArgsTwoCol" cellspacing="0">
            <col class="Column-Column1" style="width: 200px;" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-h</td>
                    <td class="BodyD-Column2-Body1">Display this usage information</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-B</td>
                    <td class="BodyD-Column2-Body1">Do not display the banner</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-V</td>
                    <td class="BodyD-Column2-Body1">Display the version information</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-q</td>
                    <td class="BodyD-Column2-Body1">Quiet mode.  No information will be displayed</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-stdout file</td>
                    <td class="BodyD-Column2-Body1">Redirect <code>stdout</code> to the specified file</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-stderr file</td>
                    <td class="BodyD-Column2-Body1">Redirect <code>stderr</code> to the specified file</td>
                </tr>
                <tr class="Body-Body1" MadCap:conditions="CmdLine.TFS">
                    <td class="BodyB-Column1-Body1">-tfs TFS_TYPE</td>
                    <td class="BodyA-Column2-Body1">Specify the TFS type to use (TFST, TFSR, or TFSS) [default = TFST]</td>
                </tr>
            </tbody>
        </table>
        <table style="caption-side: top;mc-table-style: url('../Resources/TableStyles/ArgsTwoCol.css');" class="TableStyle-ArgsTwoCol" cellspacing="0">
            <col class="Column-Column1" style="width: 200px;" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-d PATH</td>
                    <td class="BodyD-Column2-Body1">The path of the <i>Document Root</i>. Default is current directory.
</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-p N</td>
                    <td class="BodyD-Column2-Body1">Anchor PORT, referring to the TFS associated with this utility. Default is <span class="MyVariablesDefaultPort">21553</span>.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-v</td>
                    <td class="BodyD-Column2-Body1">Verbose output.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-start</td>
                    <td class="BodyD-Column2-Body1">Begin execution of utility as a separate process.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-stop</td>
                    <td class="BodyD-Column2-Body1">Stop execution of utility as a separate process.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-query</td>
                    <td class="BodyD-Column2-Body1">Check the status of the utility process (running/not running).</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-install PATH</td>
                    <td class="BodyD-Column2-Body1"><b>Windows only,</b> Requires administrative privilege. Install utility as an automatic service. <i>PATH</i> is the directory or fully qualified path to the utility's executable file.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">-uninstall</td>
                    <td class="BodyD-Column2-Body1"><b>Windows only,</b> Requires administrative privilege. Uninstall the utility service. Use the service control manager to stop the execution of the service first.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-nodisk</td>
                    <td class="BodyA-Column2-Body1">Don't use any disk I/O.</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">Replication User's Guide</p>
        <p><a href="../DFUG/Chapter2.htm">Replication Architecture</a>
        </p>
        <p><a href="../DFUG/Chapter2.htm#DBStorageLoc">Database Storage Location</a>
        </p>
        <hr MadCap:conditions="Default.ScreenOnly" width="100%" size="0" align="center" />
        <p MadCap:conditions="Default.ScreenOnly" style="font-size: 8pt;"><span class="MyVariablesCopyright">Copyright © 2012, Raima Inc. All rights reserved.</span>
        </p>
        <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
        </script>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="../../Default_CSH.htm#util/dbmirror.htm" style="">Open topic with navigation</a>
        </p>
    </body>
</html>