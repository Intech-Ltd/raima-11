<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Utility Programs|Utility Function Descriptions" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" class="" MadCap:PathToHelpSystem="../../../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>d_dchain</title>
        <link rel="icon" type="image/png" href="http://docs.raima.com/favicon.png" />
        <link href="../../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/ParamStruct.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/FunctionArgs.css" rel="stylesheet" />
        <link href="../../../Resources/TableStyles/CoreErrCodes.css" rel="stylesheet" />
        <link href="../../../Resources/Stylesheets/raima.css" rel="stylesheet" />
        <script src="../../../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="../../../../Default_CSH.htm#util/dbrepair/RM/d_dchain.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../../dbUTIL.htm">Utility Programs</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../../../RM/Chapter39.htm">Utility Function Descriptions</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">d_dchain</span>
        </div>
        <h3 class="newpage"><a name="kanchor426"></a>d_dchain</h3>
        <p>Delete chain sort API.</p>
        <p class="Heading">Prototype</p><pre xml:space="preserve">int32_t <b>d_dchain</b>(
    const DCHAIN_PARAMS *<i>params</i>,
    DB_TASK             *<i>task</i>, 
    int32_t              <i>dbn</i>);</pre><pre xml:space="preserve">int32_t <b>d_dchainW</b>(
    const DCHAIN_PARAMSW *<i>params</i>,
    DB_TASK              *<i>task</i>, 
    int32_t               <i>dbn</i>);
</pre>
        <p class="Heading">Parameters</p>
        <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/FunctionArgs.css');margin-left: 0;margin-right: auto;" class="TableStyle-FunctionArgs" cellspacing="0">
            <col style="width: 140px;" class="Column-Column1" />
            <col style="width: 80px;" class="Column-Column3" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">params</td>
                    <td class="BodyB-Column3-Body1">(input)</td>
                    <td class="BodyA-Column2-Body1">A pointer to a DCHAIN_PARAMS structure.</td>
                </tr>
            </tbody>
        </table>
        <table style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/FunctionArgs.css');margin-left: 0;margin-right: auto;caption-side: top;" class="TableStyle-FunctionArgs" cellspacing="0">
            <col style="width: 140px;" class="Column-Column1" />
            <col style="width: 80px;" class="Column-Column3" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">task</td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">A pointer to a <code>DB_TASK</code> structure.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">dbn</td>
                    <td class="BodyB-Column3-Body1">(input)</td>
                    <td class="BodyA-Column2-Body1">The database number.</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">Description</p>
        <p>The <b>d_dchain</b> utility API sorts the deleted record slots on the delete chains of the listed data files (<code>files</code>) in database address order. If no files are listed, all data files in database will be processed.</p>
        <p class="selected" style="font-weight: normal;">The purpose of this utility is to increase the probability that newly created records in the same file will be placed close together. The extent of any performance improvement, however, will depend upon the application. The most likely time to use this utility is after a periodic purge of a particular set of record types, many of which were entered together; thus there would be many contiguous record slots on the delete chain.</p>
        <table style="width: 100%;border-left-style: solid;border-left-width: 1px;border-left-color: #c0c0c0;border-right-style: solid;border-right-width: 1px;border-right-color: #c0c0c0;border-top-style: solid;border-top-width: 1px;border-top-color: #c0c0c0;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #c0c0c0;border-collapse: collapse;margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/TableStyles/ParamStruct.css');caption-side: top;" class="TableStyle-ParamStruct" cellspacing="0">
            <caption>DCHAIN_PARAMS structure</caption>
            <col style="width: 110px;" class="Column-Column1" />
            <col style="width: 129px;" class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Member</th>
                    <th class="HeadE-Column2-Header1">Type</th>
                    <th class="HeadD-Column3-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td style="font-family: monospace;" class="BodyE-Column1-Body1">quiet</td>
                    <td style="font-family: monospace;" class="BodyE-Column2-Body1">DB_BOOLEAN</td>
                    <td class="BodyD-Column3-Body1">No output except for errors.</td>
                </tr>
                <tr class="Body-Body1">
                    <td style="font-family: monospace;" class="BodyE-Column1-Body1">verbose</td>
                    <td style="font-family: monospace;" class="BodyE-Column2-Body1">DB_BOOLEAN</td>
                    <td class="BodyD-Column3-Body1">Show detailed output of the operations performed on the database</td>
                </tr>
                <tr class="Body-Body1">
                    <td style="font-family: monospace;" class="BodyE-Column1-Body1">numFiles</td>
                    <td style="font-family: monospace;" class="BodyE-Column2-Body1">uint16_t</td>
                    <td class="BodyD-Column3-Body1">The number of files names in the <i>files</i> element. This should be 0 if you want to sort the delete chain on all files in the database.</td>
                </tr>
                <tr class="Body-Body1">
                    <td style="font-family: monospace;" class="BodyE-Column1-Body1">files</td>
                    <td style="font-family: monospace;" class="BodyE-Column2-Body1">const char **</td>
                    <td class="BodyD-Column3-Body1">An array of filenames listing the specific files that will have their delete chain sorted. If this element is NULL, all files in the database will be sorted.</td>
                </tr>
                <tr class="Body-Body1">
                    <td style="font-family: monospace;" class="BodyB-Column1-Body1">stdout_file</td>
                    <td style="font-family: monospace;" class="BodyB-Column2-Body1">const char *</td>
                    <td class="BodyA-Column3-Body1">This specifies the name of the file to which output data will be written. If set to PSP_STDOUT, stdout is used. If set to NULL or to an empty string, no output will be generated.</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">Currency Changes</p>
        <p>Currency is invalidated by using this API.</p>
        <p class="Heading">Locking Requirements</p>
        <p>This utility requires exclusive access to the database.</p>
        <p class="Heading">Required Headers</p><pre xml:space="preserve">#include "dutilproto.h"</pre>
        <p class="Heading">Libraries</p>
        <table style="width: 100%; margin-left: 0; margin-right: auto;">
            <col style="width: 200px;">
            </col>
            <col>
            </col>
            <thead>
                <tr>
                    <th>Library Name</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>rdmutil<span class="MyVariablesLibraryVersion">11</span></code>
                    </td>
                    <td><span class="MyVariablesProductShortName">RDM</span> Utility Library</td>
                </tr>
            </tbody>
        </table>
        <p>See <a href="../../../GS/distrib.htm#Library">Library Naming Conventions</a> section for full library name and a list of library dependencies.</p>
        <p class="Heading">Return Codes</p>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Value</th>
                    <th class="HeadE-Column2-Header1">Name</th>
                    <th class="HeadD-Column3-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">0</td>
                    <td class="BodyB-Column2-Body1">S_OKAY</td>
                    <td class="BodyA-Column3-Body1">normal return, okay</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-1</td>
                    <td class="BodyB-Column2-Body1">S_DBOPEN</td>
                    <td class="BodyA-Column3-Body1">database not opened</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-24</td>
                    <td class="BodyB-Column2-Body1">S_NOTLOCKED</td>
                    <td class="BodyA-Column3-Body1">attempt to access unlocked set/record</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-52</td>
                    <td class="BodyB-Column2-Body1">S_INVTASK</td>
                    <td class="BodyA-Column3-Body1">invalid task</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-939</td>
                    <td class="BodyB-Column2-Body1">S_READONLY</td>
                    <td class="BodyA-Column3-Body1">unable to update file due to READONLY option</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">See Also</p>
        <p><a href="../UTL/dchain.htm">dchain utility</a>
        </p>
        <p class="Heading">Example</p><pre xml:space="preserve">/* RDM Delete Chain Sort Utility API Example ******************************
*/
int32_t MAIN(int32_t argc, const char *const *argv)
{
    int32_t        status = S_OKAY;
    DB_TASK       *task;
    DCHAIN_PARAMS  params;
    char          *files[2] = {"tims.d01", "tims.d02"};

    memset(&amp;params, 0, sizeof(DCHAIN_PARAMS));

    /* just set the non-zero parameters */
    params.numFiles = 2;
    params.files    = files;
    params.stdout_file = PSP_STDOUT;

    if ((status = d_opentask(&amp;task)) == S_OKAY) {
        if ((status = d_open("tims", "x", task)) == S_OKAY) {
            status = d_dchain(&amp;params, task, CURR_DB);
            d_close(task);
        }
        d_closetask(task);
    }

    return(0);
}
</pre>
        <hr MadCap:conditions="Default.ScreenOnly" width="100%" size="0" align="center" />
        <p MadCap:conditions="Default.ScreenOnly" style="font-size: 8pt;"><span class="MyVariablesCopyright">Copyright © 2012, Raima Inc. All rights reserved.</span>
        </p>
        <script type="text/javascript" src="../../../SkinSupport/MadCapBodyEnd.js">
        </script>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="../../../../Default_CSH.htm#util/dbrepair/RM/d_dchain.htm" style="">Open topic with navigation</a>
        </p>
    </body>
</html>