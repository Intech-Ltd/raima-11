<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="TFS Configuration &amp; Extension API|Summary Listing of TFS API Functions" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>d_tfsinit, d_tfsinitEx</title>
        <link rel="icon" type="image/png" href="http://docs.raima.com/favicon.png" />
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/ParamStruct.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/FunctionArgs.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/TwoColNoLines.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/CoreErrCodes.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/raima.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="../../../Default_CSH.htm#RM/utilapi/d_tfsinit.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../TFS/dbTFSUG.htm">TFS Configuration &amp; Extension API</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../../TFS/TFSAPIReference.htm">Summary Listing of TFS API Functions</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">d_tfsinit, d_tfsinitEx</span>
        </div>
        <h3 class="newpage"><a name="kanchor410"></a>d_tfsinit, d_tfsinitEx</h3>
        <p>Provide TFS with parameters to start up as a server</p>
        <p class="Heading">Prototype</p><pre xml:space="preserve">int32_t d_tfsinit(
    const char       *docroot,
    const TFS_PARAMS *tparams,
    TFS_HANDLE       *hTFS)</pre><pre xml:space="preserve">int32_t d_tfsinitW(
    const wchar_t     *docroot,
    const TFS_PARAMSW *tparams,
    TFS_HANDLE        *hTFS)</pre><pre xml:space="preserve">int32_t d_tfsinitEx(
    const char       *docroot,
    const TFS_PARAMS *tparams,
    TFS_HANDLE       *hTFS,
    TFS_TYPE          tfs_type)</pre><pre xml:space="preserve">int32_t d_tfsinitExW(
    const wchar_t     *docroot,
    const TFS_PARAMSW *tparams,
    TFS_HANDLE        *hTFS,
    TFS_TYPE           tfs_type)</pre>
        <p class="Heading">Parameters</p>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/FunctionArgs.css');margin-left: 0;margin-right: auto;" class="TableStyle-FunctionArgs" cellspacing="0">
            <col style="width: 140px;" class="Column-Column1" />
            <col style="width: 80px;" class="Column-Column3" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">docroot</td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">The directory under which all databases controlled by this TFS are stored. <br />If "" or NULL is used, the environment variable RDM_DOCROOT is used, otherwise the current working directory is used.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">tparams</td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">Parameters required for TFS operation. If NULL, defaults are used.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">hTFS</td>
                    <td class="BodyE-Column3-Body1">(output)</td>
                    <td class="BodyD-Column2-Body1">Handle used for running, stopping or terminating this TFS.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">tfs_type</td>
                    <td class="BodyB-Column3-Body1">(input)</td>
                    <td class="BodyA-Column2-Body1">Set type of TFS configuration.</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">Description</p>
        <p>Call <code>d_tfsinit</code> to set up the TFS with non-default    parameters. The <code>d_tfsinit</code> function should be called before    any tasks are created.  Any successful call to <code>d_tfsinit</code> requires    a corresponding call to <code>d_tfsterm</code>.  <code>d_tfsinit</code> and <code>d_tfsterm</code> are    implemented using reference counting so they can be nested.  Only    the initial call to <code>d_tfsinit</code> and the final call to <code>d_tfsterm</code>    will actually perform any useful work.</p>
        <p>   This function does not have any effect when the RPC configuration is used.    The current implementation always returns the handle as NULL.    The <code>d_opentask</code> function call will automatically initialize the TFS with the default values if your application does not explicitly call this function prior to a call to <code>d_opentask</code>.</p>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/TwoColNoLines.css');margin-left: 0;margin-right: auto;caption-side: top;" class="TableStyle-TwoColNoLines" cellspacing="0">
            <caption>TFS&#160;Configuration Types</caption>
            <col class="Column-Column1" style="width: 225px;" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1"><code>TFS_TYPE_DEFAULT</code> <![CDATA[ ]]></td>
                    <td class="BodyD-Column2-Body1">Factory default TFS type is <code>TFS_TYPE_TFS</code>.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1"><code>TFS_TYPE_TFS</code> <![CDATA[ ]]></td>
                    <td class="BodyD-Column2-Body1">See <a href="#2.3">Direct-Link Configuration</a></td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1"><code>TFS_TYPE_RPC</code> <![CDATA[ ]]></td>
                    <td class="BodyD-Column2-Body1">See <a href="#2.2">Standard Client/Server Configuration</a></td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1"><code>TFS_TYPE_STANDALONE</code> <![CDATA[ ]]></td>
                    <td class="BodyA-Column2-Body1">See <a href="#2.4">Standalone Configuration</a></td>
                </tr>
            </tbody>
        </table>
        <p class="Notes">Note:&#160;The TFS&#160;Configuration Type can only be changed after the <code>d_tfsterm</code> has been called.</p>
        <p class="Heading">TFS_PARAMS(W) prototypes</p><pre xml:space="preserve">typedef struct {
            uint16_t            port;
            uint32_t            rd_only;
            uint32_t            no_disk;
            uint16_t            verbose;
            const char         *logfile;
            const char         *stdout_file;
    } TFS_PARAMS;</pre><pre xml:space="preserve">typedef struct _tfs_paramsw {
            uint16_t            port;
            uint32_t            rd_only;
            uint32_t            no_disk;
            uint16_t            verbose;
            const wchar_t      *logfile;
            const wchar_t      *stdout_file;
    } TFS_PARAMSW;</pre>
        <p class="Heading">TFS_PARAMS&#160;struct members</p>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/ParamStruct.css');margin-left: 0;margin-right: auto;caption-side: top;" class="TableStyle-ParamStruct" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Element</th>
                    <th class="HeadE-Column2-Header1">Declaration</th>
                    <th class="HeadD-Column3-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">port</td>
                    <td class="BodyE-Column2-Body1">uint16_t</td>
                    <td class="BodyD-Column3-Body1">Server listen port</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">rd_only</td>
                    <td class="BodyE-Column2-Body1">uint32_t</td>
                    <td class="BodyD-Column3-Body1">Read-only device, TRUE or FALSE.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">no_disk</td>
                    <td class="BodyE-Column2-Body1">uint32_t</td>
                    <td class="BodyD-Column3-Body1">Diskless mode, TRUE or FALSE.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">verbose</td>
                    <td class="BodyE-Column2-Body1">uint16_t</td>
                    <td class="BodyD-Column3-Body1">     Verbose mode, TRUE or FALSE.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">logfile</td>
                    <td class="BodyE-Column2-Body1">const char *</td>
                    <td class="BodyD-Column3-Body1">     File name to open for logging. Can be NULL.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">stdout_file</td>
                    <td class="BodyB-Column2-Body1">const char *</td>
                    <td class="BodyA-Column3-Body1"> The name of a file to wirte informational messages instead of displaying them to stdout. If the value is NULL or "stdout" the messages will be sent to stdout. If the value is an empty string ("") no messages will be displayed. </td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">TFS&#160;User's Guide</p>
        <p><a href="../../TFS/Chapter2.htm">Server Configurations</a>
        </p>
        <p class="Heading">Required Headers</p><pre xml:space="preserve">#include "rdm.h"</pre>
        <p class="Heading">Libraries</p>
        <table style="width: 100%; margin-left: 0; margin-right: auto;">
            <col style="width: 200px;">
            </col>
            <col>
            </col>
            <thead>
                <tr>
                    <th>Library Name</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>rdmrdm<span class="MyVariablesLibraryVersion">11</span></code>
                    </td>
                    <td><span class="MyVariablesProductShortName">RDM</span> Runtime Library</td>
                </tr>
            </tbody>
        </table>
        <p>See <a href="../../GS/distrib.htm#Library">Library Naming Conventions</a> section for full library name and a list of library dependencies.</p>
        <p class="Heading">Return Codes</p>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Value</th>
                    <th class="HeadE-Column2-Header1">Name</th>
                    <th class="HeadD-Column3-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">0</td>
                    <td class="BodyB-Column2-Body1">S_OKAY</td>
                    <td class="BodyA-Column3-Body1">normal return, okay</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-200</td>
                    <td class="BodyB-Column2-Body1">S_TX_ERROR</td>
                    <td class="BodyA-Column3-Body1">generic tx_ error</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-904</td>
                    <td class="BodyB-Column2-Body1">S_NOMEMORY</td>
                    <td class="BodyA-Column3-Body1">out of memory</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">See Also</p>
        <p><a href="d_tfsversion.htm">d_tfsversion</a>
        </p>
        <p><a href="d_tfsrun.htm">d_tfsrun</a>
        </p>
        <p><a href="d_tfsstop.htm">d_tfsstop</a>
        </p>
        <p><a href="d_tfsterm.htm">d_tfsterm</a>
        </p>
        <p><a href="d_tfsxapiparams.htm">d_tfsxapiparms</a>
        </p>
        <p class="Heading">Example</p>
        <p class="Caption">d_tfsinit Example</p><pre xml:space="preserve">TFS_HANDLE hTFS;
TFS_PARAMS tparams;
tparams.port= 21553;
tparams.rd_only= FALSE;
tparams.no_disk= FALSE;
tparams.verbose= FALSE;
tparams.logfile= NULL;
tparams.stdout_file= NULL;

/*&#160;start default TFS&#160;configuration */
sStatus= d_tfsinit ("/my/directory", &amp;tparams, &amp;hTFS);
if (sStatus == S_OKAY) {
    DB_TASK *task;
    d_opentask (&amp;task);
    ...
    d_closetask (task);
    d_tfsterm (hTFS);
}
</pre>
        <p class="Caption">d_tfsinitEx Example</p><pre xml:space="preserve">TFS_HANDLE hTFS;
TFS_PARAMS tparams;
tparams.port= 21553;
tparams.rd_only= FALSE;
tparams.no_disk= FALSE;
tparams.verbose= FALSE;
tparams.logfile= NULL;
tparams.stdout_file= NULL;

/* start Direct-Link&#160;TFS&#160;configuration&#160;*/
sStatus= d_tfsinitEx ("/my/directory", &amp;tparams, &amp;hTFS, TFS_TYPE_TFS);
if (sStatus == S_OKAY) {
    DB_TASK *task;
    d_opentask (&amp;task);
    ...
    d_closetask (task);
    d_tfsterm (hTFS);
}
</pre>
        <hr MadCap:conditions="Default.ScreenOnly" width="100%" size="0" align="center" />
        <p MadCap:conditions="Default.ScreenOnly" style="font-size: 8pt;"><span class="MyVariablesCopyright">Copyright © 2012, Raima Inc. All rights reserved.</span>
        </p>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="../../../Default_CSH.htm#RM/utilapi/d_tfsinit.htm" style="">Open topic with navigation</a>
        </p>
    </body>
</html>