<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Native API|Reference Manual|Core API Function Descriptions" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>d_blobread</title>
        <link rel="icon" type="image/png" href="http://docs.raima.com/favicon.png" />
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/FunctionArgs.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/CoreErrCodes.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/raima.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="../../../Default_CSH.htm#RM/api/d_blobread.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../dbCore.htm">Native API</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../dbRM.htm">Reference Manual</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../Chapter33.htm">Core API Function Descriptions</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">d_blobread</span>
        </div>
        <h3 class="newpage"><a name="kanchor6"></a>d_blobread</h3>
        <p>Read BLOB data</p>
        <p class="Heading">Prototype</p><pre xml:space="preserve">int32_t <b>d_blobread</b>(
    int32_t   <i>field</i>,
    void     *<i>buf</i>,
    uint32_t  <i>len</i>,
    uint32_t *<i>size</i>,
    DB_TASK  *<i>task</i>, 
    int32_t   <i>dbn</i>);</pre>
        <p class="Heading">Parameters</p>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/FunctionArgs.css');margin-left: 0;margin-right: auto;" class="TableStyle-FunctionArgs" cellspacing="0">
            <col style="width: 140px;" class="Column-Column1" />
            <col style="width: 80px;" class="Column-Column3" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">field</td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">The field type to access from the current record.  This must be a BLOB field.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">buf</td>
                    <td class="BodyE-Column3-Body1">(output)</td>
                    <td class="BodyD-Column2-Body1">A pointer to the buffer into which the BLOB data will be placed.  This buffer must be at least <code>len</code> bytes long.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">len</td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">The length, in bytes, of the buffer indicated by <code>buf</code></td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">size</td>
                    <td class="BodyB-Column3-Body1">(output)</td>
                    <td class="BodyA-Column2-Body1">A pointer to the number of bytes actually read.</td>
                </tr>
            </tbody>
        </table>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/FunctionArgs.css');margin-left: 0;margin-right: auto;caption-side: top;" class="TableStyle-FunctionArgs" cellspacing="0">
            <col style="width: 140px;" class="Column-Column1" />
            <col style="width: 80px;" class="Column-Column3" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">task</td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">A pointer to a <code>DB_TASK</code> structure.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">dbn</td>
                    <td class="BodyB-Column3-Body1">(input)</td>
                    <td class="BodyA-Column2-Body1">The database number.</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">Description</p>
        <p>This function reads data into a buffer from the position of the specified BLOB data in the current record.  If the call to this function is the first BLOB data operation for the current record, the function reads from the start of the BLOB data.  If <code>d_blobseek</code> has been called to set the current position for <code>field</code>, reading will commence from there.  Otherwise, it reads from the point where the last read stopped.  The <code>d_blobtell</code> function may be used to determine the current position.</p>
        <p>The function writes the actual number of bytes it has read to the <code>size</code> parameter.  Following a successful call to <code>d_blobread</code>, the current position in the record is advanced by <code>size</code> bytes.</p>
        <p>The <code>d_blobread</code> will handle a size of 0 and will not actually read any data but will return the amount of data left (i.e. the size minus the current position) in <code>size</code>.</p>
        <p>The <code>d_blobread</code> function returns <code>S_BADBLOB</code> if the BLOB data is corrupted.  The function returns <code>S_NOTFOUND</code> when it is called for the first time after it has encountered data that is shorter than the specified length.  Then, for the next call after <code>d_blobread</code> returns S_NOTFOUND, the function reads from the start of the indicated BLOB data.</p>
        <p class="Heading">Currency Changes</p>
        <p>None.</p>
        <p class="Heading">Locking Requirements</p>
        <p>Read lock on record type of current record.</p>
        <p class="Heading">User's Guide</p>
        <p><a href="../../UG/Chapter5.htm#5.12">BLOB Processing in <span class="MyVariablesProductShortName">RDM</span></a>
        </p>
        <p class="Heading">Required Headers</p><pre xml:space="preserve">#include "rdm.h"</pre>
        <p class="Heading">Libraries</p>
        <table style="width: 100%; margin-left: 0; margin-right: auto;">
            <col style="width: 200px;">
            </col>
            <col>
            </col>
            <thead>
                <tr>
                    <th>Library Name</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>rdmrdm<span class="MyVariablesLibraryVersion">11</span></code>
                    </td>
                    <td><span class="MyVariablesProductShortName">RDM</span> Runtime Library</td>
                </tr>
            </tbody>
        </table>
        <p>See <a href="../../GS/distrib.htm#Library">Library Naming Conventions</a> section for full library name and a list of library dependencies.</p>
        <p class="Heading">Return Codes</p>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Value</th>
                    <th class="HeadE-Column2-Header1">Name</th>
                    <th class="HeadD-Column3-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">0</td>
                    <td class="BodyB-Column2-Body1">S_OKAY</td>
                    <td class="BodyA-Column3-Body1">normal return, okay</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">2</td>
                    <td class="BodyB-Column2-Body1">S_NOTFOUND</td>
                    <td class="BodyA-Column3-Body1">record not found</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">6</td>
                    <td class="BodyB-Column2-Body1">S_DELETED</td>
                    <td class="BodyA-Column3-Body1">record/set deleted since last accessed</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-7</td>
                    <td class="BodyB-Column2-Body1">S_NOCR</td>
                    <td class="BodyA-Column3-Body1">no current record</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-24</td>
                    <td class="BodyB-Column2-Body1">S_NOTLOCKED</td>
                    <td class="BodyA-Column3-Body1">attempt to access unlocked set/record</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-926</td>
                    <td class="BodyB-Column2-Body1">S_NOTBLOB</td>
                    <td class="BodyA-Column3-Body1">the specified field is not a blob field</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">See Also</p>
        <p><a href="d_opentask.htm">d_opentask</a>
        </p>
        <p><a href="d_open.htm">d_open</a>, <a href="d_open_ptr.htm">d_open_ptr</a>, <a href="d_iopen.htm">d_iopen</a>, <a href="d_iopen_ptr.htm">d_iopen_ptr</a></p>
        <p><a href="d_blobseek.htm">d_blobseek</a>
        </p>
        <p><a href="d_blobtell.htm">d_blobtell</a>
        </p>
        <p class="Heading">Example</p><pre xml:space="preserve">int32_t getBlobId(int16_t recid, int32_t fldid);

int16_t readBlobField(
    int16_t   recid,
    int32_t   fldid,
    void     *pvBuffer,
    uint32_t  uSize,
    uint32_t *puActualSize,
    DB_TASK   task)
{
    int32_t nBlobId = getBlobId(recid, fldid);

    return d_blobread(nBlobId, pvBuffer, uSize, puActualSize, task, CURR_DB);
}
</pre>
        <hr MadCap:conditions="Default.ScreenOnly" width="100%" size="0" align="center" />
        <p MadCap:conditions="Default.ScreenOnly" style="font-size: 8pt;"><span class="MyVariablesCopyright">Copyright © 2012, Raima Inc. All rights reserved.</span>
        </p>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="../../../Default_CSH.htm#RM/api/d_blobread.htm" style="">Open topic with navigation</a>
        </p>
    </body>
</html>