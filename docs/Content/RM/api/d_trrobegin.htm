<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Native API|Reference Manual|Core API Function Descriptions" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>d_trrobegin</title>
        <link rel="icon" type="image/png" href="http://docs.raima.com/favicon.png" />
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/FunctionArgs.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/CoreErrCodes.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/raima.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="../../../Default_CSH.htm#RM/api/d_trrobegin.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../dbCore.htm">Native API</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../dbRM.htm">Reference Manual</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../Chapter33.htm">Core API Function Descriptions</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">d_trrobegin</span>
        </div>
        <h3 class="newpage"><a name="kanchor129"></a>d_trrobegin</h3>
        <p>Begin a Read-Only Transaction</p>
        <p class="Heading">Prototype</p><pre xml:space="preserve">int32_t <b>d_trrobegin</b>(
    DB_TASK *<i>task</i>,
    int32_t  <i>dbn</i>, 
    TXID    *<i>txid</i>);</pre>
        <p class="Heading">Parameters</p>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/FunctionArgs.css');margin-left: 0;margin-right: auto;caption-side: top;" class="TableStyle-FunctionArgs" cellspacing="0">
            <col style="width: 140px;" class="Column-Column1" />
            <col style="width: 80px;" class="Column-Column3" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">task</td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">A pointer to a <code>DB_TASK</code> structure.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">dbn</td>
                    <td class="BodyB-Column3-Body1">(input)</td>
                    <td class="BodyA-Column2-Body1">The database number.</td>
                </tr>
            </tbody>
        </table>
        <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/FunctionArgs.css');margin-left: 0;margin-right: auto;" class="TableStyle-FunctionArgs" cellspacing="0">
            <col style="width: 140px;" class="Column-Column1" />
            <col style="width: 80px;" class="Column-Column3" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">txid</td>
                    <td class="BodyB-Column3-Body1">(output)</td>
                    <td class="BodyA-Column2-Body1">Transaction ID.</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">Description</p>
        <p>Function <b>d_trrobegin</b> is called to mark the beginning of a Read-Only Transaction (a multi-version concurrency control implementation). After calling this function, and until <a href="d_trroend.htm">d_trroend</a> is called, it will appear as though no changes are being made to this database. Although changes are permitted by other users, this task will only see its own version of the database. It can be viewed as a snapshot of the database at that moment in time.</p>
        <p>A read-only-transaction may not be started when a normal transaction is active, and vice-versa. Locks are not required or permitted during a read-only-transaction.</p>
        <p>Read-only-transactions may be used to increase system throughput when readers and writers may contend for the same records. If Read-Only Transactions are used to read records, they will not prevent write locks (as required by normal transactions) from being granted, facilitating quicker transactions.</p>
        <p>Read-Only Transactions should be short-lived, because the TFS is required to keep cached copies of pages that have been changed by other tasks, so that this task can still "see" its own version.</p>
        <p>The <i>txid</i> parameter will be set by this function to the transaction ID following the last one that has been applied to the database. That is, all transactions up to, but not including <i>txid</i> will be found in the database files during this Read-Only Transaction. This information is used to create database backups using a Read-Only Transaction method.</p>
        <p class="Heading">Currency Changes</p>
        <p>None.</p>
        <p class="Heading">Locking Requirements</p>
        <p>None.</p>
        <p class="Heading">User's Guide</p>
        <p><a href="../../UG/Chapter7.htm#7.4.7">Read-Only-Transactions</a>
        </p>
        <p><a href="../../UG/Chapter6.htm#6.42">Locking Rules</a>
        </p>
        <p class="Heading">Required Headers</p><pre xml:space="preserve">#include "rdm.h"</pre>
        <p class="Heading">Libraries</p>
        <table style="width: 100%; margin-left: 0; margin-right: auto;">
            <col style="width: 200px;">
            </col>
            <col>
            </col>
            <thead>
                <tr>
                    <th>Library Name</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>rdmrdm<span class="MyVariablesLibraryVersion">11</span></code>
                    </td>
                    <td><span class="MyVariablesProductShortName">RDM</span> Runtime Library</td>
                </tr>
            </tbody>
        </table>
        <p>See <a href="../../GS/distrib.htm#Library">Library Naming Conventions</a> section for full library name and a list of library dependencies.</p>
        <p class="Heading">Return Codes</p>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <thead>
                <tr class="Head-Header1">
                    <th class="HeadE-Column1-Header1">Value</th>
                    <th class="HeadE-Column2-Header1">Name</th>
                    <th class="HeadD-Column3-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">0</td>
                    <td class="BodyB-Column2-Body1">S_OKAY</td>
                    <td class="BodyA-Column3-Body1">normal return, okay</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-76</td>
                    <td class="BodyB-Column2-Body1">S_ROTACTIVE</td>
                    <td class="BodyA-Column3-Body1">A read-only transaction is already active</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-CoreErrCodes" cellspacing="0" style="mc-table-style: url('../../Resources/TableStyles/CoreErrCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-78</td>
                    <td class="BodyB-Column2-Body1">S_HASWRITELOCKS</td>
                    <td class="BodyA-Column3-Body1">A read-only transaction cannot start because the user holds write locks</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">See Also</p>
        <p><a href="d_opentask.htm">d_opentask</a>
        </p>
        <p><a href="d_open.htm">d_open</a>, <a href="d_open_ptr.htm">d_open_ptr</a>, <a href="d_iopen.htm">d_iopen</a>, <a href="d_iopen_ptr.htm">d_iopen_ptr</a></p>
        <p><a href="d_trabort.htm">d_trabort</a>
        </p>
        <p><a href="d_trend.htm">d_trend</a>
        </p>
        <p><a href="d_trroend.htm">d_trroend</a>
        </p>
        <p class="Heading">Example</p><pre xml:space="preserve">d_trrobegin(task, 0, &amp;txID);
    ...   /* generate orders report */
d_trroend(task);</pre>
        <hr MadCap:conditions="Default.ScreenOnly" width="100%" size="0" align="center" />
        <p MadCap:conditions="Default.ScreenOnly" style="font-size: 8pt;"><span class="MyVariablesCopyright">Copyright Â© 2012, Raima Inc. All rights reserved.</span>
        </p>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="../../../Default_CSH.htm#RM/api/d_trrobegin.htm" style="">Open topic with navigation</a>
        </p>
    </body>
</html>