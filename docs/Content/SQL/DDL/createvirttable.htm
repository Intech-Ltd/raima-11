<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="SQL API|SQL Language Guide|Reference Guide|SQL Statement Reference" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>create virtual table</title>
        <link rel="icon" type="image/png" href="http://docs.raima.com/favicon.png" />
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/raima.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="../../../Default_CSH.htm#SQL/DDL/createvirttable.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../../dbRSQL.htm">SQL API</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../dbSQL.htm">SQL Language Guide</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../SQLStmtRef.htm">Reference Guide</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">create virtual table</span>
        </div>
        <h3 class="newpage"><a name="kanchor229"></a>create virtual table</h3>
        <p>Create a virtual table for an external data source</p>
        <p class="Heading">Syntax</p><pre class="Grammar" xml:space="preserve">virtual_table:
 		<b>create virtual</b> [<b>read only</b>] <b>table</b>    <![CDATA[ ]]><i>table_name</i> (
			vcolumn_def[, vcolumn_def]…
 		)</pre><pre class="Grammar" xml:space="preserve">vcolumn_def:
		<i>column_name</i> base_type
			[<b>distinct values</b> = <i>num</i>] [<b>range</b>    <![CDATA[ ]]><i>constant</i>    <![CDATA[ ]]><b>to</b>    <![CDATA[ ]]><i>constant</i>]
			[<b>primary key</b>]</pre><pre class="Grammar" xml:space="preserve">
base_type:
 	 	{<b>character</b> | <b>char</b> } [(<i>length</i>)]
 	|	{{<b>character</b> | <b>char</b>} <b>varying</b> | <b>varchar</b> } (<i>length</i>)
 	|	{<b>binary</b> [(<i>length</i>)]
	|	{<b>double</b> [<b>precision</b>] | <b>float</b> | <b>real</b> }
 	|	{ <b>tinyint</b> | <b>smallint</b> | <b>int</b> | <b>integer</b> | <b>long</b> | <b>bigint</b>}
 	|	<b>date</b> | <b>time</b> | <b>timestamp</b>    <![CDATA[  
]]></pre>
        <p class="Heading">Description</p>
        <p>An <span class="MyVariablesRSQLName">RDM SQL</span><i>virtual table</i> is a feature that allows just about any kind of external data to be accessed as an SQL table.  It is defined through a combination of the <b>create virtual table</b> statement and a set of user developed C functions that conform to a particular interface specification.   A pointer to a pre-defined structure array that contains an entry for each virtual table with the addresses of each of the virtual table interface functions is passed into SQL through a call to <code>rsqlRegisterVirtualTables</code> before the database is opened.  These functions are then called by SQL at the appropriate times during the execution of any SQL statement that references the virtual table.</p>
        <p>The <b>read only</b> option indicates that the table can only be referenced in a <b>select</b> statement.</p>
        <p>Only single-column primary keys are allowed and only one column in the table can be declared to be the <b>primary key</b>.   SQL will call the vtLookup virtual table interface function to handle single-valued lookups from a <b>where</b> conditional of the form "<code>pkeycol = value</code>".</p>
        <p>In a DDL specification, all <b>create virtual table</b> statements must come after all standard <b>create table</b> statements for the database have been submitted.</p>
        <p class="Heading">Example </p><pre xml:space="preserve">create database weather_db;
create table sensor_location( 
 	longitude integer,
 	latitude integer,
 	sensor_id bigint,
 	descr char(48),
 	county char(24),
 	state char(2),
 	primary key loc_id(longitude, latitude)
);
create table weather_summary(
 	longitude integer,
 	latitude integer,
 	rdg_date date,
 	hour_of_day smallint,
 	avg_temp smallint,
 	avg_ press smallint,
 	avg_hum smallint,
 	avg_lumens smallint,
 	foreign key (longitude, latitude) references sensor_location
);
create virtual readonly table weather_data(
 	sensor_id bigint primary key,
 	loc_long integer,
 	loc_lat integer,
 	rdg_time timestamp display(19, "yyyy-mon-dd hh:mm:ss"),
 	temperature smallint range -10 to 100,
 	pressure smallint,
 	humidity smallint,
 	light smallint,
 	power integer
);</pre>
        <p class="Heading">See Also</p>
        <p><a href="../../SQLRM/rsqlRegisterVirtualTables.htm">rsqlRegisterVirtualTables</a>
        </p>
        <hr MadCap:conditions="Default.ScreenOnly" width="100%" size="0" align="center" />
        <p MadCap:conditions="Default.ScreenOnly" style="font-size: 8pt;"><span class="MyVariablesCopyright">Copyright © 2012, Raima Inc. All rights reserved.</span>
        </p>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="../../../Default_CSH.htm#SQL/DDL/createvirttable.htm" style="">Open topic with navigation</a>
        </p>
    </body>
</html>