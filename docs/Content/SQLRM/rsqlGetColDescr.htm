<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="SQL API|RSQL User's Guide|RSQL API Function Reference" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" MadCap:PathToHelpSystem="../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>rsqlGetColDescr</title>
        <link rel="icon" type="image/png" href="http://docs.raima.com/favicon.png" />
        <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/CoreErrCodes.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/FunctionArgs.css" rel="stylesheet" />
        <link href="../Resources/TableStyles/SQLErrorCodes.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/raima.css" rel="stylesheet" />
        <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="../../Default_CSH.htm#SQLRM/rsqlGetColDescr.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../dbRSQL.htm">SQL API</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../RSQLUG/dbSQLUG.htm">RSQL User's Guide</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="SQLAPIReference.htm">RSQL API Function Reference</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">rsqlGetColDescr</span>
        </div>
        <h3 class="newpage"><a name="kanchor279"></a>rsqlGetColDescr</h3>
        <p>Get description information for a specific select statement result column</p>
        <p class="Heading">Prototype</p><pre xml:space="preserve">RSQL_ERRCODE EXTERNAL_FCN rsqlGetColDescr(
    HSTMT              hStmt,     
    uint16_t           colno,     
    char              *colname,   
    uint16_t           lenColname,    
    uint16_t          *pLenColname,    
    SQL_T             *pType,      
    int16_t           *pWidth,     
    int16_t           *pPrec,      
    int16_t           *pScale,     
    int16_t           *pNullable)</pre>
        <p class="Heading">Arguments</p>
        <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/FunctionArgs.css');caption-side: top;margin-left: 0;margin-right: auto;" class="TableStyle-FunctionArgs" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column3" />
            <col class="Column-Column2" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">hStmt </td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">Statement handle.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">colno </td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">The ordinal number (1..# of columns) of the result column.</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">colname </td>
                    <td class="BodyE-Column3-Body1">(output)</td>
                    <td class="BodyD-Column2-Body1">A pointer to the char array buffer to contain the column name (can be NULL).<br /></td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">lenColname</td>
                    <td class="BodyE-Column3-Body1">(input)</td>
                    <td class="BodyD-Column2-Body1">The length of the <code>colname</code> buffer (including null terminator).</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">pLenColname</td>
                    <td class="BodyE-Column3-Body1">(output)</td>
                    <td class="BodyD-Column2-Body1">A pointer to the variable that will contain the actual <code>colname</code> length (including null terminator) (can be NULL).</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">pType</td>
                    <td class="BodyE-Column3-Body1">(output)</td>
                    <td class="BodyD-Column2-Body1">A pointer to <code>SQL_T</code> variable to contain the column's data type (can be NULL).</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">pWidth</td>
                    <td class="BodyE-Column3-Body1">(output)</td>
                    <td class="BodyD-Column2-Body1">A pointer to the variable to contain the display width (can be NULL).</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">pPrec</td>
                    <td class="BodyE-Column3-Body1">(output)</td>
                    <td class="BodyD-Column2-Body1">A pointer to the variable to contain the precision (can be NULL).</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyE-Column1-Body1">pScale</td>
                    <td class="BodyE-Column3-Body1">(output)</td>
                    <td class="BodyD-Column2-Body1">A pointer to the variable to contain the scale (unused) (can be NULL).</td>
                </tr>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">pNullable</td>
                    <td class="BodyB-Column3-Body1">(output)</td>
                    <td class="BodyA-Column2-Body1">A pointer to the variable that indicates that the column can be assigned a null (can be NULL).</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">Description</p>
        <p>Issue a call to <code>rsqlGetColDescr</code> for each column of a previously compiled <b>select</b> statement in order to get a description of the column.  The description information that is returned by the function is defined in the following table.</p>
        <table style="caption-side: top;mc-table-style: url('../Resources/TableStyles/CoreErrCodes.css');" class="TableStyle-CoreErrCodes" cellspacing="0">
            <caption>Table 29. rsqlGetColDescr Output Arguments</caption>
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <tr class="Body-Body1">
                <th class="BodyE-Column1-Body1" style="font-weight: bold;">Output Argument</th>
                <th class="BodyD-Column2-Body1" style="font-weight: bold;">Result Value</th>
            </tr>
            <tr class="Body-Body1">
                <td style="font-family: monospace;" class="BodyE-Column1-Body1">colname</td>
                <td class="BodyD-Column2-Body1">The name of the column.  For expressions, this either contains the expression string or the alias name, if specified.</td>
            </tr>
            <tr class="Body-Body1">
                <td style="font-family: monospace;" class="BodyE-Column1-Body1">pLenColname</td>
                <td class="BodyD-Column2-Body1">The total length of the column name/heading (includes null terminator).</td>
            </tr>
            <tr class="Body-Body1">
                <td style="font-family: monospace;" class="BodyE-Column1-Body1">pType</td>
                <td class="BodyD-Column2-Body1">The column result's data type.</td>
            </tr>
            <tr class="Body-Body1">
                <td style="font-family: monospace;" class="BodyE-Column1-Body1">pWidth</td>
                <td class="BodyD-Column2-Body1">The maximum display width.</td>
            </tr>
            <tr class="Body-Body1">
                <td style="font-family: monospace;" class="BodyE-Column1-Body1">pPrec</td>
                <td class="BodyD-Column2-Body1">The precision of the result value (i.e., number of significant digits)</td>
            </tr>
            <tr class="Body-Body1">
                <td style="font-family: monospace;" class="BodyE-Column1-Body1">pScale</td>
                <td class="BodyD-Column2-Body1">The scale (number of decimal places, currently unused)</td>
            </tr>
            <tr class="Body-Body1">
                <td style="font-family: monospace;" class="BodyE-Column1-Body1">pNullable</td>
                <td class="BodyD-Column2-Body1">Indication as to whether the column can be assigned a null value: 1 =&gt; nullable, 0 =&gt; not nullable or unknown.  Only applies on <b>select</b> statements that are updateable.</td>
            </tr>
        </table>
        <p>You can call first <code>rsqlGetColDescr</code> with a null <code>colname</code> argument to return the column name's string length in the <code>pLenColname</code> argument if you want to dynamically allocate the <code>colname</code> buffer. However, the maximum length of a column (or table or database) name is given by the <code>NAMELEN #define</code> that is contained in the standard <span class="MyVariablesRSQLName">RDM SQL</span> header file "rsql.h". </p>
        <p class="Heading">Example</p><pre xml:space="preserve">#include "rsql.h"
&#160;&#160;&#160;&#160;...
HSTMT hstmt;
RSQL_ERRCODE stat;
uint16_t nocols;
struct col_descr_pkt {
&#160;&#160;&#160;&#160;char     *name;
&#160;&#160;&#160;&#160;int16_t   buflen;
&#160;&#160;&#160;&#160;SQL_T     type;
&#160;&#160;&#160;&#160;int16_t   width;
&#160;&#160;&#160;&#160;int16_t   nullable;
} *ColDescrs;
&#160;&#160;&#160;&#160;...
&#160;&#160;&#160;&#160;stat = rsqlPrepare(hstmt, "select * from salesperson", NULL, NULL, &amp;nocols);
&#160;&#160;&#160;&#160;if ( stat == errSUCCESS ) {
	ColDescrs = malloc(nocols*sizeof(struct col_descr_pkt));
	for ( cno = 0; cno &lt; nocols; ++cno ) {
		/* fetch size of column name/heading */
		rsqlGetColDescr(hstmt, cno+1, NULL, 0, &amp;ColDescrs[cno].buflen, 
 				NULL, NULL, NULL, NULL, NULL);

		/* allocate column name buffer */
		ColDescrs[cno].name = malloc(clen+1);

		/* fetch all column descriptor info */
		rsqlGetColDescr(hstmt, cno+1, ColDescrs[cno].name, ColDescrs[cno].buflen,
			NULL, &amp;ColDescrs[cno].type, &amp;ColDescrs[cno].width, 
			NULL, NULL, &amp;ColDescrs[cno].nullable);
	}
&#160;&#160;&#160;&#160;...</pre>
        <p class="Heading">Required Headers</p><pre xml:space="preserve">#include "rsql.h"</pre>
        <p class="Heading">Libraries</p>
        <table style="width: 100%; margin-left: 0; margin-right: auto;">
            <col style="width: 200px;">
            </col>
            <col>
            </col>
            <thead>
                <tr>
                    <th>Library Name</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>rdmrsql<span class="MyVariablesLibraryVersion">11</span></code>
                    </td>
                    <td>RSQL&#160;API Library</td>
                </tr>
            </tbody>
        </table>
        <p>See <a href="../GS/distrib.htm#Library">Library Naming Conventions</a> section for full library name and a list of library dependencies.</p>
        <p class="Heading">Return Codes</p>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <th class="BodyB-Column1-Body1" style="font-weight: bold;">Error Code</th>
                    <th class="BodyB-Column2-Body1" style="font-weight: bold;">Enum Identifier</th>
                    <th class="BodyB-Column3-Body1" style="font-weight: bold;">SQL State</th>
                    <th class="BodyA-Column4-Body1" style="font-weight: bold;">Description</th>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">0</td>
                    <td class="BodyB-Column2-Body1">errSUCCESS</td>
                    <td class="BodyB-Column3-Body1">00000</td>
                    <td class="BodyA-Column4-Body1">no error was detected</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">1</td>
                    <td class="BodyB-Column2-Body1">errTRUNCATE</td>
                    <td class="BodyB-Column3-Body1">01004</td>
                    <td class="BodyA-Column4-Body1">data truncation</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-2</td>
                    <td class="BodyB-Column2-Body1">errSQLERROR</td>
                    <td class="BodyB-Column3-Body1">RX002</td>
                    <td class="BodyA-Column4-Body1">internal SQL error</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">-5</td>
                    <td class="BodyB-Column2-Body1">errINVHANDLE</td>
                    <td class="BodyB-Column3-Body1">02002</td>
                    <td class="BodyA-Column4-Body1">invalid connection or statement handle</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">28</td>
                    <td class="BodyB-Column2-Body1">errINVARG</td>
                    <td class="BodyB-Column3-Body1">HY009</td>
                    <td class="BodyA-Column4-Body1">invalid argument value</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">33</td>
                    <td class="BodyB-Column2-Body1">errCOLNUMBER</td>
                    <td class="BodyB-Column3-Body1">07009</td>
                    <td class="BodyA-Column4-Body1">invalid descriptor index (column number)</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">53</td>
                    <td class="BodyB-Column2-Body1">errNOTSELECT</td>
                    <td class="BodyB-Column3-Body1">24000</td>
                    <td class="BodyA-Column4-Body1">current/cursor's statement is not SELECT</td>
                </tr>
            </tbody>
        </table>
        <table class="TableStyle-SQLErrorCodes" cellspacing="0" style="mc-table-style: url('../Resources/TableStyles/SQLErrorCodes.css');">
            <col class="Column-Column1" />
            <col class="Column-Column2" />
            <col class="Column-Column3" />
            <col class="Column-Column4" />
            <tbody>
                <tr class="Body-Body1">
                    <td class="BodyB-Column1-Body1">65</td>
                    <td class="BodyB-Column2-Body1">errINVSTATE</td>
                    <td class="BodyB-Column3-Body1">RX008</td>
                    <td class="BodyA-Column4-Body1">invalid statement state</td>
                </tr>
            </tbody>
        </table>
        <p class="Heading">See Also</p>
        <p><a href="rsqlPrepare.htm">rsqlPrepare</a>
        </p>
        <p><a href="rsqlGetNumResultCols.htm">rsqlGetNumResultCols</a>
        </p>
        <hr MadCap:conditions="Default.ScreenOnly" width="100%" size="0" align="center" />
        <p MadCap:conditions="Default.ScreenOnly" style="font-size: 8pt;"><span class="MyVariablesCopyright">Copyright © 2012, Raima Inc. All rights reserved.</span>
        </p>
        <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
        </script>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="../../Default_CSH.htm#SQLRM/rsqlGetColDescr.htm" style="">Open topic with navigation</a>
        </p>
    </body>
</html>