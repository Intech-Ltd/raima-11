<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Replication and Mirroring Guide|User's Guide" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" class="" MadCap:PathToHelpSystem="../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Replication Setup</title>
        <link rel="icon" type="image/png" href="http://docs.raima.com/favicon.png" />
        <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/raima.css" rel="stylesheet" />
        <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop" style="display: none;"><a href="../../Default_CSH.htm#DFUG/Chapter6.htm" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">You are here: </span><a class="MCBreadcrumbsLink" href="../dbDataFlow.htm">Replication and Mirroring Guide</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbsSelf">User's Guide</span><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Replication Setup</span>
        </div>
        <h1>Replication Setup</h1>
        <p>Slave databases are replicated, rather than mirrored, when the <code>dbrep</code> or <code>dbrepsq</code>l utilities are used rather than the <code>dbmirror</code> utility for receiving and updating the slave database. The master database always uses <code>dbmirror</code> for handling both mirrored and replicated slaves.</p>
        <p>Replication is enabled by an INI&#160;file setting. In the <code>[configuration]</code> section, the key <code>replication</code> is set to <code>1</code> to enable replication. Remove this key or set to <code>0</code> to disable replication.</p><pre xml:space="preserve">[configuration]
; replication is set to 1 (TRUE)&#160;so that replication log files will be generated.
; The 'mirroring' parameter is not required for replication.
; Default is for no generation of replication log files.<br />replication=1</pre>
        <p class="Heading">Default Options with Masters and Slaves on Different Computers</p>
        <p>When only one TFS is run on each computer, the default ports should be used, and may be left off the command-line. The default port for <code>tfserver</code> is <code><span class="MyVariablesDefaultPort">21553</span></code>. The <code>dbget</code> utility refers to anchor port <code><span class="MyVariablesDefaultPort">21553</span></code> to connect to <code>dbrep</code>. The following example assumes that two Windows and two Linux machines are being used.</p>
        <p>Master 1 (Windows, <code>tfs.raima.com</code>), controlling <code>sales</code> and <code>mkt</code> databases:</p><pre xml:space="preserve">
c:
cd \RDM\databases.win32
start tfserver
start dbmirror</pre>
        <p>Master 2 (Linux, <code>RLM-lptp</code>), controlling <code>tims</code> database:</p><pre xml:space="preserve">
cd /RDM/databases.lnx
tfserver &amp;
dbmirror &amp;</pre>
        <p>Slave 1 (Windows, <code>WLW-XP</code>) replicating to <span class="MyVariablesProductShortName">RDM</span> slaves:</p><pre xml:space="preserve">d:
cd \databases.win32
start tfserver
start dbrep
dbget -b mkt@tfs.raima.com
dbget -b sales@tfs.raima.com</pre>
        <p>Slave 2 (Linux, <code>dai-desktop</code>) replicating to RDM&#160;Server slaves:</p><pre xml:space="preserve">export RDSLOGIN="RDMs;admin;secret"
tfserver -d /home/databases &amp;
dbrepsql -d /home/databases &amp;
dbget -b mkt@tfs.raima.com
dbget -b tims@RLM-lptp</pre>
        <p class="Heading">Using dbget From a Different Computer</p>
        <p>The <code>dbget</code> utility will commonly be used from within the context of the slave database, but it doesn't need to be. It simply needs to address the correct <code>dbrep</code> slave process and database. Assuming that the master and slave processes have been set up as above, then the following <code>dbget</code> invocations will achieve the same results and will work from any of the computers:</p><pre xml:space="preserve">dbget -b -s WLW-XP mkt@tfs.raima.com
dbget -b -s WLW-XP sales@tfs.raima.com
dbget -b -s dai-desktop mkt@tfs.raima.com
dbget -b -s dai-desktop tims@RLM-lptp</pre>
        <p class="Heading">Non-Default Options with Masters and Slaves on the Same Computer</p>
        <p>Refer to the corresponding section in Section 12.5 above. The difference between replication and mirroring is in the use of <code>dbrep</code> or <code>dbrepsql</code> in place of the slave <code>dbmirror</code>.</p>
        <hr MadCap:conditions="Default.ScreenOnly" width="100%" size="0" align="center" />
        <p MadCap:conditions="Default.ScreenOnly" style="font-size: 8pt;"><span class="MyVariablesCopyright">Copyright Â© 2012, Raima Inc. All rights reserved.</span>
        </p>
        <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
        </script>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkBottom" style="display: none;"><a href="../../Default_CSH.htm#DFUG/Chapter6.htm" style="">Open topic with navigation</a>
        </p>
    </body>
</html>